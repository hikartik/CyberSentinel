#include <stdio.h>
#include <stdlib.h>
#include <time.h>
// This file helps test the antivirus. Compile and run it; this will create
// a binary with high entropy, which the heuristic detector should flag.
int main(void) {
    FILE *fp = fopen("malware.bin", "wb");
    if (!fp) {
        perror("fopen");
        return 1;
    }
    // Seed the random number generator
    srand((unsigned) time(NULL));

    // Write 1024 random bytes to the file.
    for (int i = 0; i < 1024; i++) {
        unsigned char byte = rand() % 256;
        fwrite(&byte, sizeof(byte), 1, fp);
    }
    fclose(fp);
    printf("malware.bin created with 1024 random bytes.\n");
    return 0;
}

